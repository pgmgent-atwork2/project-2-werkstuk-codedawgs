<%- include("../partials/header.ejs") %>

<div class="main notifications-page">
  <h1 class="notifications-page__title">All Notifications (<%= notifications ? notifications.length : 0 %>)</h1>
  <% if (notifications && notifications.length > 0) { %>
    <ul class="notifications-page__list">
      <% notifications.forEach(n => { %>
        <li class="notifications-page__item">
          <% const def = measurementDef.find(m => m.id === n.measurement_def_id) %>
          <span class="notifications-page__message">
            <% if (def && (n.message === "high" || n.message === "low")) { %>
              Value for <%= def.name %> is too <strong><%= n.message %></strong>
            <% } else { %>
              <%= n.message %>
            <% } %>
          </span>
          <form action="/notifications/<%= n.id %>" method="POST" class="notifications-page__form">
            <button type="submit" class="button notifications-page__resolve-btn">Resolve</button>
          </form>
        </li>
      <% }) %>
    </ul>
  <% } else { %>
    <p class="notifications-page__empty">No notifications.</p>
  <% } %>
</div>

<%- include("../partials/navigation.ejs") %>